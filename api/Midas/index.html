<!doctype html>
<html lang="en" dir="ltr" class="plugin-moonwave plugin-id-moonwave">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Midas | midas</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nightcycle.github.io/midas/api/Midas"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Midas | midas"><meta data-rh="true" name="description" content="This is the service itself, the main interface which the dev sets up the various data structures."><meta data-rh="true" property="og:description" content="This is the service itself, the main interface which the dev sets up the various data structures."><link data-rh="true" rel="icon" href="/midas/logo.png"><link data-rh="true" rel="canonical" href="https://nightcycle.github.io/midas/api/Midas"><link data-rh="true" rel="alternate" href="https://nightcycle.github.io/midas/api/Midas" hreflang="en"><link data-rh="true" rel="alternate" href="https://nightcycle.github.io/midas/api/Midas" hreflang="x-default"><link rel="stylesheet" href="/midas/assets/css/styles.19a5646f.css">
<link rel="preload" href="/midas/assets/js/runtime~main.6780c0c3.js" as="script">
<link rel="preload" href="/midas/assets/js/main.d627df3b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/midas/"><b class="navbar__title text--truncate">midas</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/midas/api/">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nightcycle/midas" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docPageContainer_wNNk"><div class="docPage_Dpn1"><div class="docSidebarContainer_o_re"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/midas/api/DataSet">​Data​Set</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/midas/api/DataTable">​Data​Table</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/midas/api/Midas">​Midas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/midas/api/MongoDB">​Mongo​D​B</a></li></ul></nav></div></div><main class="docMainContainer_HJE1"><div class="container padding-vert--lg"><div class="row"><div class="col docItemCol_MU3C"><div class="docItemContainer_Wv98"><article><div class="member_J0w1 markdown"><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_oUs_"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><header><h1 class="docTitle_mZRt" style="text-decoration:none"><span style="display:inline-block">Midas</span></h1><div class="luaClassTags_EipM"></div><div>
<p>This is the service itself, the main interface which the dev sets up the various data structures.</p>
</div></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="types">Types<a href="#types" class="hash-link" aria-label="Direct link to Types" title="Direct link to Types">​</a></h2><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="OnAttemptInvokeLogger"><code style="text-decoration:none">OnAttemptInvokeLogger</code><a href="#OnAttemptInvokeLogger" class="hash-link" aria-label="Direct link to OnAttemptInvokeLogger" title="Direct link to OnAttemptInvokeLogger">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/init.luau#L77"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code class="purple_ieR2">type</code> <code>OnAttemptInvokeLogger<!-- --> = </code> <code class="purple_ieR2">(</code><div class="inset_uKQm"><code>success<!-- -->: </code><code class="blue_P4bS">boolean</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>size<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>rowCount<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>currentSizeLimit<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>currentRowLimit<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>rowsRemaining<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>attemptIndex<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>errorMessage<!-- -->: </code><code class="blue_P4bS">string?</code></div><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code></div><div>
<p>I often run a datatable on the performance of posts to tune the parameters / detect issue / estimate data validity. If you wish to do the same you can with this function.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="FormatDictionary"><code style="text-decoration:none">FormatDictionary</code><a href="#FormatDictionary" class="hash-link" aria-label="Direct link to FormatDictionary" title="Direct link to FormatDictionary">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/StorageProviders/Util.luau#L17"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code class="purple_ieR2">type</code> <code>FormatDictionary<!-- --> = </code> <code class="purple_ieR2">{</code><span><code>[</code><code class="blue_P4bS">string</code><code>]</code></span><code>: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/midas/api/Midas#DataType">DataType</a></code><code class="purple_ieR2">}</code></div><div>
<p>A parameter of OnBatchSaveInvoke. A dictionary of the assigned data types for each key in the rows, used to inform how to structure data in the API requests.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="DataList"><code style="text-decoration:none">DataList</code><a href="#DataList" class="hash-link" aria-label="Direct link to DataList" title="Direct link to DataList">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/StorageProviders/Util.luau#L23"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code class="purple_ieR2">type</code> <code>DataList<!-- --> = </code> <code class="purple_ieR2">{</code><span><code>[</code><code class="blue_P4bS">number</code><code>]</code></span><code>: </code><code class="green_DgR4">{</code><span><code>[</code><code class="blue_P4bS">string</code><code>]</code></span><code>: </code><code class="blue_P4bS">unknown</code><code class="green_DgR4">}</code><code class="purple_ieR2">}</code></div><div>
<p>A parameter of OnBatchSaveInvoke. A list of dictionaries containing unknown data that can be processed into storage safe data</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="PayloadRecorder"><code style="text-decoration:none">PayloadRecorder</code><a href="#PayloadRecorder" class="hash-link" aria-label="Direct link to PayloadRecorder" title="Direct link to PayloadRecorder">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/StorageProviders/Util.luau#L29"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code class="purple_ieR2">type</code> <code>PayloadRecorder<!-- --> = </code> <code class="purple_ieR2">(</code><code>size<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code></div><div>
<p>A parameter of OnBatchSaveInvoke. In order to respect bandwidth limits, Midas attempts to track how much data is being sent out. Once you know how much that is call this function. Native methods like MongoDB will handle it for you, just pass it on as a parameter.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="OnBatchSaveInvoke"><code style="text-decoration:none">OnBatchSaveInvoke</code><a href="#OnBatchSaveInvoke" class="hash-link" aria-label="Direct link to OnBatchSaveInvoke" title="Direct link to OnBatchSaveInvoke">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/StorageProviders/Util.luau#L35"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code class="purple_ieR2">type</code> <code>OnBatchSaveInvoke<!-- --> = </code> <code class="purple_ieR2">(</code><div class="inset_uKQm"><code>projectId<!-- -->: </code><code class="blue_P4bS">string</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>dataSetId<!-- -->: </code><code class="blue_P4bS">string</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>dataTableId<!-- -->: </code><code class="blue_P4bS">string</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>dataList<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/midas/api/Midas#DataList">DataList</a></code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>format<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/midas/api/Midas#FormatDictionary">FormatDictionary</a></code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>onPayloadSizeKnownInvoke<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/midas/api/Midas#PayloadRecorder">PayloadRecorder</a></code></div><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="blue_P4bS">boolean</code></div><div>
<p>The function called by the framework whenever it wants to post data</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="DataType"><code style="text-decoration:none">DataType</code><a href="#DataType" class="hash-link" aria-label="Direct link to DataType" title="Direct link to DataType">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/Util.luau#L20"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code class="purple_ieR2">type</code> <code>DataType<!-- --> = </code> <code class="blue_P4bS">&quot;Binary&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Date&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Decimal128&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Double&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Int32&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Int64&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Boolean&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Array&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Object&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;String&quot;</code></div><div>
<p>The pre-approved storage types. Good for type validation + allocating the most efficient amount of storage space.</p>
</div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="properties">Properties<a href="#properties" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties">​</a></h2><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ProjectId"><code style="text-decoration:none">ProjectId</code><a href="#ProjectId" class="hash-link" aria-label="Direct link to ProjectId" title="Direct link to ProjectId">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/init.luau#L91"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Midas<!-- -->.<!-- -->ProjectId<!-- -->:<!-- --> </code> <code class="blue_P4bS">string?</code></div><div>
<p>The project id passed to the posting function</p>
</div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="init"><code style="text-decoration:none">init</code><a href="#init" class="hash-link" aria-label="Direct link to init" title="Direct link to init">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/init.luau#L368"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Midas<!-- -->.</code><code class="green_DgR4">init</code><code>(</code><code>) → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code></div><div>
<p>initializes the package</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Post"><code style="text-decoration:none">Post</code><a href="#Post" class="hash-link" aria-label="Direct link to Post" title="Direct link to Post">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/init.luau#L117"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Midas<!-- -->:</code><code class="green_DgR4">Post</code><code>(</code><div class="inset_uKQm"><div><code>maxEntriesPerTable<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>the max number of entries per table you'll be posting</p>
</span></span></div><div><code>maxSizePerTable<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>the max amount of data (in characters) that can be sent per table in a single post</p>
</span></span></div><div><code>delayPerTable<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>the amount it will wait between post requests, skipped if the table is empty</p>
</span></span></div><div><code>recursive<!-- -->: </code><code class="blue_P4bS">boolean</code><span class="inlineDescription_G7Er">-- <span>
<p>whether it sticks on a single table, delaying and posting until it is empty.</p>
</span></span></div></div><code>) → </code><code>(</code><div class="inset_uKQm"><div><code class="blue_P4bS">totalSuccess</code><code class="blue_P4bS">boolean</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>whether all data tables posted without error</p>
</span></span></div><div><code class="blue_P4bS">totalEmpty</code><code class="blue_P4bS">boolean</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>whether every datatable is now empty</p>
</span></span></div><div><code class="blue_P4bS">netData</code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>the amount of data (in characters) sent by all tables</p>
</span></span></div></div><code>)</code></div><div>
<p>This triggers the process of gathering rows for posting for all datatables. All the parameters are meant to help the dev work within the limits of whatever API they use to store data.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="CreateDataSet"><code style="text-decoration:none">CreateDataSet</code><a href="#CreateDataSet" class="hash-link" aria-label="Direct link to CreateDataSet" title="Direct link to CreateDataSet">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/init.luau#L164"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Midas<!-- -->:</code><code class="green_DgR4">CreateDataSet</code><code>(</code><div class="inset_uKQm"><div><code>name<!-- -->: </code><code class="blue_P4bS">string</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>the key your dataset will be organized under</p>
</span></span></div><div><code>id<!-- -->: </code><code class="blue_P4bS">string</code><span class="inlineDescription_G7Er">-- <span>
<p>the id that's passed to the data posting solution</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">dataset</code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/midas/api/DataSet">DataSet</a></code><span class="inlineDescription_G7Er">-- <span>
<p>the dataset you just constructed</p>
</span></span></div><div>
<p>Constructs a dataset</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="SetOnBatchSaveInvoke"><code style="text-decoration:none">SetOnBatchSaveInvoke</code><a href="#SetOnBatchSaveInvoke" class="hash-link" aria-label="Direct link to SetOnBatchSaveInvoke" title="Direct link to SetOnBatchSaveInvoke">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/init.luau#L192"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Midas<!-- -->:</code><code class="green_DgR4">SetOnBatchSaveInvoke</code><code>(</code><div class="inset_uKQm"><div><code>onBatchSaveInvoke<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/midas/api/Midas#OnBatchSaveInvoke">OnBatchSaveInvoke</a></code><span class="inlineDescription_G7Er">-- <span>
<p>the function that posts data</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Sets the posting function</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="GetDataSet"><code style="text-decoration:none">GetDataSet</code><a href="#GetDataSet" class="hash-link" aria-label="Direct link to GetDataSet" title="Direct link to GetDataSet">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/init.luau#L197"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Midas<!-- -->:</code><code class="green_DgR4">GetDataSet</code><code>(</code><code>name<!-- -->: </code><code class="blue_P4bS">string</code><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/midas/api/DataSet">DataSet</a></code></div><div>
<p>gets a dataset by name</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="GetDataSets"><code style="text-decoration:none">GetDataSets</code><a href="#GetDataSets" class="hash-link" aria-label="Direct link to GetDataSets" title="Direct link to GetDataSets">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/init.luau#L205"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Midas<!-- -->:</code><code class="green_DgR4">GetDataSets</code><code>(</code><code>) → </code><code class="purple_ieR2">{</code><span><code>[</code><code class="blue_P4bS">number</code><code>]</code></span><code>: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/midas/api/DataSet">DataSet</a></code><code class="purple_ieR2">}</code></div><div>
<p>gets a list of datasets</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="GetRowCount"><code style="text-decoration:none">GetRowCount</code><a href="#GetRowCount" class="hash-link" aria-label="Direct link to GetRowCount" title="Direct link to GetRowCount">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/init.luau#L210"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Midas<!-- -->:</code><code class="green_DgR4">GetRowCount</code><code>(</code><code>) → </code><code class="blue_P4bS">number</code></div><div>
<p>gets the number of rows currently waiting to be processed</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Automate"><code style="text-decoration:none">Automate</code><a href="#Automate" class="hash-link" aria-label="Direct link to Automate" title="Direct link to Automate">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/nightcycle/midas/blob/master/src/init.luau#L230"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Midas<!-- -->:</code><code class="green_DgR4">Automate</code><code>(</code><div class="inset_uKQm"><div><code>printEnabled<!-- -->: </code><code class="blue_P4bS">boolean</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>whether you want to print the results of each post (useful for debugging).</p>
</span></span></div><div><code>maxEntriesPerTable<!-- -->: </code><code class="blue_P4bS">number?</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The upper limit for how many entries you allow. Defaults to 200.</p>
</span></span></div><div><code>minDurationPerTable<!-- -->: </code><code class="blue_P4bS">number?</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The delay after posting a table. Defaults to 1.</p>
</span></span></div><div><code>updateDelay<!-- -->: </code><code class="blue_P4bS">number?</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>How long Midas will wait for rows to accumulate between runs.</p>
</span></span></div><div><code>averageSizePerRow<!-- -->: </code><code class="blue_P4bS">number?</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>Used to estimate how much data will be passed by a table. Defaults to 200</p>
</span></span></div><div><code>escalationRate<!-- -->: </code><code class="blue_P4bS">number?</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The speed at which it will alter limits to achieve a successful post.</p>
</span></span></div><div><code>onAttemptInvokeLogger<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/midas/api/Midas#OnAttemptInvokeLogger">OnAttemptInvokeLogger?</a></code><span class="inlineDescription_G7Er">-- <span>
<p>A function that is called after each attempted run, used for debugging / logging performance mostly.</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Automates the posting of rows, dynamically adapting to handle errors and rate limits as appropriate.</p>
</div></div></article></div><details><summary>Show raw api</summary><pre style="max-width:100%;white-space:pre-wrap">{
    &quot;functions&quot;: [
        {
            &quot;name&quot;: &quot;Post&quot;,
            &quot;desc&quot;: &quot;This triggers the process of gathering rows for posting for all datatables. All the parameters are meant to help the dev work within the limits of whatever API they use to store data.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;maxEntriesPerTable&quot;,
                    &quot;desc&quot;: &quot;the max number of entries per table you&#x27;ll be posting&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;maxSizePerTable&quot;,
                    &quot;desc&quot;: &quot;the max amount of data (in characters) that can be sent per table in a single post&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;delayPerTable&quot;,
                    &quot;desc&quot;: &quot;the amount it will wait between post requests, skipped if the table is empty&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;recursive&quot;,
                    &quot;desc&quot;: &quot;whether it sticks on a single table, delaying and posting until it is empty.&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;whether all data tables posted without error&quot;,
                    &quot;lua_type&quot;: &quot;totalSuccess boolean&quot;
                },
                {
                    &quot;desc&quot;: &quot;whether every datatable is now empty&quot;,
                    &quot;lua_type&quot;: &quot;totalEmpty boolean&quot;
                },
                {
                    &quot;desc&quot;: &quot;the amount of data (in characters) sent by all tables&quot;,
                    &quot;lua_type&quot;: &quot;netData number&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 117,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;CreateDataSet&quot;,
            &quot;desc&quot;: &quot;Constructs a dataset&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;name&quot;,
                    &quot;desc&quot;: &quot;the key your dataset will be organized under&quot;,
                    &quot;lua_type&quot;: &quot;string&quot;
                },
                {
                    &quot;name&quot;: &quot;id&quot;,
                    &quot;desc&quot;: &quot;the id that&#x27;s passed to the data posting solution&quot;,
                    &quot;lua_type&quot;: &quot;string&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;the dataset you just constructed&quot;,
                    &quot;lua_type&quot;: &quot;dataset DataSet&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 164,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;SetOnBatchSaveInvoke&quot;,
            &quot;desc&quot;: &quot;Sets the posting function&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;onBatchSaveInvoke&quot;,
                    &quot;desc&quot;: &quot;the function that posts data&quot;,
                    &quot;lua_type&quot;: &quot;OnBatchSaveInvoke&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 192,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;GetDataSet&quot;,
            &quot;desc&quot;: &quot;gets a dataset by name\r&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;name&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;string&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;DataSet\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 197,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;GetDataSets&quot;,
            &quot;desc&quot;: &quot;gets a list of datasets\r&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;{[number]: DataSet}\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 205,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;GetRowCount&quot;,
            &quot;desc&quot;: &quot;gets the number of rows currently waiting to be processed\r&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 210,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Automate&quot;,
            &quot;desc&quot;: &quot;Automates the posting of rows, dynamically adapting to handle errors and rate limits as appropriate.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;printEnabled&quot;,
                    &quot;desc&quot;: &quot;whether you want to print the results of each post (useful for debugging).&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                },
                {
                    &quot;name&quot;: &quot;maxEntriesPerTable&quot;,
                    &quot;desc&quot;: &quot;The upper limit for how many entries you allow. Defaults to 200.&quot;,
                    &quot;lua_type&quot;: &quot;number?&quot;
                },
                {
                    &quot;name&quot;: &quot;minDurationPerTable&quot;,
                    &quot;desc&quot;: &quot;The delay after posting a table. Defaults to 1.&quot;,
                    &quot;lua_type&quot;: &quot;number?&quot;
                },
                {
                    &quot;name&quot;: &quot;updateDelay&quot;,
                    &quot;desc&quot;: &quot;How long Midas will wait for rows to accumulate between runs.&quot;,
                    &quot;lua_type&quot;: &quot;number?&quot;
                },
                {
                    &quot;name&quot;: &quot;averageSizePerRow&quot;,
                    &quot;desc&quot;: &quot;Used to estimate how much data will be passed by a table. Defaults to 200&quot;,
                    &quot;lua_type&quot;: &quot;number?&quot;
                },
                {
                    &quot;name&quot;: &quot;escalationRate&quot;,
                    &quot;desc&quot;: &quot;The speed at which it will alter limits to achieve a successful post.&quot;,
                    &quot;lua_type&quot;: &quot;number?&quot;
                },
                {
                    &quot;name&quot;: &quot;onAttemptInvokeLogger&quot;,
                    &quot;desc&quot;: &quot;A function that is called after each attempted run, used for debugging / logging performance mostly.&quot;,
                    &quot;lua_type&quot;: &quot;OnAttemptInvokeLogger?&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 230,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;init&quot;,
            &quot;desc&quot;: &quot;initializes the package\r&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;() -&gt; ()\r\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 368,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        }
    ],
    &quot;properties&quot;: [
        {
            &quot;name&quot;: &quot;ProjectId&quot;,
            &quot;desc&quot;: &quot;The project id passed to the posting function\r&quot;,
            &quot;lua_type&quot;: &quot;string?&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 91,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        }
    ],
    &quot;types&quot;: [
        {
            &quot;name&quot;: &quot;OnAttemptInvokeLogger&quot;,
            &quot;desc&quot;: &quot;I often run a datatable on the performance of posts to tune the parameters / detect issue / estimate data validity. If you wish to do the same you can with this function.\r&quot;,
            &quot;lua_type&quot;: &quot;(success: boolean, size: number, rowCount: number, currentSizeLimit: number, currentRowLimit: number, rowsRemaining: number, attemptIndex: number, errorMessage: string?) -&gt; ()&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 77,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;FormatDictionary&quot;,
            &quot;desc&quot;: &quot;A parameter of OnBatchSaveInvoke. A dictionary of the assigned data types for each key in the rows, used to inform how to structure data in the API requests.\r&quot;,
            &quot;lua_type&quot;: &quot;{[string]: DataType}&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 17,
                &quot;path&quot;: &quot;src/StorageProviders/Util.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;DataList&quot;,
            &quot;desc&quot;: &quot;A parameter of OnBatchSaveInvoke. A list of dictionaries containing unknown data that can be processed into storage safe data\r&quot;,
            &quot;lua_type&quot;: &quot;{[number]: {[string]: unknown}}&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 23,
                &quot;path&quot;: &quot;src/StorageProviders/Util.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;PayloadRecorder&quot;,
            &quot;desc&quot;: &quot;A parameter of OnBatchSaveInvoke. In order to respect bandwidth limits, Midas attempts to track how much data is being sent out. Once you know how much that is call this function. Native methods like MongoDB will handle it for you, just pass it on as a parameter.\r&quot;,
            &quot;lua_type&quot;: &quot;(size: number) -&gt; ()&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 29,
                &quot;path&quot;: &quot;src/StorageProviders/Util.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;OnBatchSaveInvoke&quot;,
            &quot;desc&quot;: &quot;The function called by the framework whenever it wants to post data\r&quot;,
            &quot;lua_type&quot;: &quot;(projectId: string, dataSetId: string, dataTableId: string, dataList: DataList, format: FormatDictionary,onPayloadSizeKnownInvoke: PayloadRecorder) -&gt; boolean&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 35,
                &quot;path&quot;: &quot;src/StorageProviders/Util.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;DataType&quot;,
            &quot;desc&quot;: &quot;The pre-approved storage types. Good for type validation + allocating the most efficient amount of storage space.\r&quot;,
            &quot;lua_type&quot;: &quot;\&quot;Binary\&quot; | \&quot;Date\&quot; | \&quot;Decimal128\&quot; | \&quot;Double\&quot; | \&quot;Int32\&quot; | \&quot;Int64\&quot; | \&quot;Boolean\&quot; | \&quot;Array\&quot; | \&quot;Object\&quot; | \&quot;String\&quot;&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 20,
                &quot;path&quot;: &quot;src/Util.luau&quot;
            }
        }
    ],
    &quot;name&quot;: &quot;Midas&quot;,
    &quot;desc&quot;: &quot;This is the service itself, the main interface which the dev sets up the various data structures.&quot;,
    &quot;source&quot;: {
        &quot;line&quot;: 69,
        &quot;path&quot;: &quot;src/init.luau&quot;
    }
}</pre></details></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#types" class="table-of-contents__link toc-highlight">Types</a><ul><li><a href="#DataList" class="table-of-contents__link toc-highlight">DataList</a></li><li><a href="#DataType" class="table-of-contents__link toc-highlight">DataType</a></li><li><a href="#FormatDictionary" class="table-of-contents__link toc-highlight">FormatDictionary</a></li><li><a href="#OnAttemptInvokeLogger" class="table-of-contents__link toc-highlight">OnAttemptInvokeLogger</a></li><li><a href="#OnBatchSaveInvoke" class="table-of-contents__link toc-highlight">OnBatchSaveInvoke</a></li><li><a href="#PayloadRecorder" class="table-of-contents__link toc-highlight">PayloadRecorder</a></li></ul></li><li><a href="#properties" class="table-of-contents__link toc-highlight">Properties</a><ul><li><a href="#ProjectId" class="table-of-contents__link toc-highlight">ProjectId</a></li></ul></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a><ul><li><a href="#Automate" class="table-of-contents__link toc-highlight">:Automate</a></li><li><a href="#CreateDataSet" class="table-of-contents__link toc-highlight">:CreateDataSet</a></li><li><a href="#GetDataSet" class="table-of-contents__link toc-highlight">:GetDataSet</a></li><li><a href="#GetDataSets" class="table-of-contents__link toc-highlight">:GetDataSets</a></li><li><a href="#GetRowCount" class="table-of-contents__link toc-highlight">:GetRowCount</a></li><li><a href="#Post" class="table-of-contents__link toc-highlight">:Post</a></li><li><a href="#SetOnBatchSaveInvoke" class="table-of-contents__link toc-highlight">:SetOnBatchSaveInvoke</a></li><li><a href="#init" class="table-of-contents__link toc-highlight">.init</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Nightcycle Studios LLC. Built with Moonwave and Docusaurus</div></div></div></footer></div>
<script src="/midas/assets/js/runtime~main.6780c0c3.js"></script>
<script src="/midas/assets/js/main.d627df3b.js"></script>
</body>
</html>