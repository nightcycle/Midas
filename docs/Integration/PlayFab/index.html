<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Integration/PlayFab">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<title data-rh="true">PlayFab | Midas</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nightcycle.github.io/midas/docs/Integration/PlayFab"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="PlayFab | Midas"><meta data-rh="true" name="description" content="In favor of producing a more accessible framework that doesn&#x27;t require 3 hours of debugging cloud APIs for each user, we&#x27;ve gone with a more low-tech manual method for retrieving data from PlayFab. The basic plan is that we&#x27;ll be running a KQL script in the PlayFab data explorer, then exporting the data as a CSV."><meta data-rh="true" property="og:description" content="In favor of producing a more accessible framework that doesn&#x27;t require 3 hours of debugging cloud APIs for each user, we&#x27;ve gone with a more low-tech manual method for retrieving data from PlayFab. The basic plan is that we&#x27;ll be running a KQL script in the PlayFab data explorer, then exporting the data as a CSV."><link data-rh="true" rel="icon" href="/midas/favicon.png"><link data-rh="true" rel="canonical" href="https://nightcycle.github.io/midas/docs/Integration/PlayFab"><link data-rh="true" rel="alternate" href="https://nightcycle.github.io/midas/docs/Integration/PlayFab" hreflang="en"><link data-rh="true" rel="alternate" href="https://nightcycle.github.io/midas/docs/Integration/PlayFab" hreflang="x-default"><link rel="stylesheet" href="/midas/assets/css/styles.9c6fd068.css">
<link rel="preload" href="/midas/assets/js/runtime~main.49e3e1c5.js" as="script">
<link rel="preload" href="/midas/assets/js/main.9b84b74c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/midas/"><b class="navbar__title text--truncate">Midas</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/midas/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/midas/api/">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nightcycle/midas" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Press S to Search..." aria-label="Search" class="navbar__search-input search-bar"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/midas/docs/intro">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/midas/docs/Integration/VSCode">Integration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/midas/docs/Integration/VSCode">VS Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/midas/docs/Integration/Roblox">Roblox</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/midas/docs/Integration/PlayFab">PlayFab</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/midas/docs/Integration/PowerBi">Power BI</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/midas/docs/Teleportation">Teleporting Players</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/midas/docs/Templates">Using Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/midas/docs/SeriesEvents">Series Events</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/midas/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Integration</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">PlayFab</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>PlayFab</h1><p>In favor of producing a more accessible framework that doesn&#x27;t require 3 hours of debugging cloud APIs for each user, we&#x27;ve gone with a more low-tech manual method for retrieving data from PlayFab. The basic plan is that we&#x27;ll be running a KQL script in the PlayFab data explorer, then exporting the data as a CSV.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-playfab">Why PlayFab?<a class="hash-link" href="#why-playfab" title="Direct link to heading">​</a></h2><p>The online service PlayFab will allow you <a href="https://playfab.com/pricing/" target="_blank" rel="noopener noreferrer">100,000 users worth of data-storage for free per game</a>. You&#x27;re welcome to shop-around for better options, but it is in my experience more than adequate for kickstarting a new game. If you have an established game with larger a larger audience, they offer a pay-as-you-go option, and at $99 a month the amount of players that can be stored becomes unlimited.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="i-dont-want-to-use-playfab">I don&#x27;t want to use PlayFab<a class="hash-link" href="#i-dont-want-to-use-playfab" title="Direct link to heading">​</a></h2><p>Alright, all you technicall need is a CSV of data that meets this format:</p><div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;DATA&quot;,&quot;TIMESTAMP&quot;,&quot;VERSION&quot;,&quot;VERSION_TEXT&quot;,&quot;EVENT_ID&quot;, &quot;EVENT&quot;,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The header order doesn&#x27;t matter. Here&#x27;s what needs to be under each column</p><ul><li>DATA: This should be an encoded JSON table provided in the body of the API post request at &quot;State&quot;</li><li>TIMESTAMP: A string that can be parsed into a DateTime object. For example: &quot;2022-09-28T21:53:49.859Z&quot;</li><li>VERSION: An encoded JSON table provided within the DATA JSON table.</li><li>VERSION_TEXT: A readable version string provided at key &quot;Version&quot; in the API post request.</li><li>EVENT_ID: A 32 character string that is unique for each event.</li><li>EVENT: The name of the event fired.</li></ul><p>So long as whatever your method in results in a CSV file that fits the above conditions, you do not need to use PlayFab to use this Framework. If there is enough demand for a separate workflow that does this for you (for example, with GameAnalytics), I am not against adding it, I&#x27;m just unmotivated at this time.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="retrieving-the-data-via-playfab">Retrieving the Data via PlayFab<a class="hash-link" href="#retrieving-the-data-via-playfab" title="Direct link to heading">​</a></h2><p>This is how you can get your data out of PlayFab after it&#x27;s been recorded.If you haven&#x27;t already, first <a href="https://doc.photonengine.com/en-us/bolt/current/demos-and-tutorials/playfab-integration/playfab-101-setup-game-title#:~:text=Login%20or%20create%20a%20new,to%20the%20Game%20Title%20dashboard." target="_blank" rel="noopener noreferrer">create an account and a &quot;Title&quot; entity for your game</a>. After completing that, go into your new Title&#x27;s profile and on the menu on the left side at the very bottom click the &quot;Data&quot; button under the &quot;Analyze&quot; category. Once you&#x27;ve done that you will now be looking at the &quot;Data Explorer (basic)&quot;. At the top of the page is a tab for &quot;Data Explorer (advanced)&quot;. Click that tab, and you&#x27;ll be taken to one of the most cluttered and temperamental code editing UX I have ever used. </p><p>This is the KQL editor, and you can use it to run KQL code which will output data at the bottom. First, copy the text in the <a href="https://github.com/nightcycle/midas/blob/main/scripts/export.kql" target="_blank" rel="noopener noreferrer">export.kql</a> file. The way this code works, is it starts by finding players who were recorded in your game between the TIME_RANGE_START and TIME_RANGE_END variables. It then searches the entire database for all events relating to those users. This is so that the user profiles are accurate - if a person played your game 100 times in the last year, but only 1 time in the time range, you&#x27;ll want to know that. As a bonus, this also easily allows you to compare how a current version of the game is performing against a previous version. You may also set a PLAYER_COUNT limit, this will arbitrarily limit the amount of users recorded.</p><p>Once you&#x27;ve pasted and configured the KQL code into the PlayFab editor, press &quot;Run&quot; in the upper left hand corner of the editor. If it runs correctly you should see a table appear at the bottom. If you do, select the dropdown menu labeled &quot;File&quot; in the upper right side of the editor, and press the option &quot;Export to CSV&quot;. This will download the data to your computer.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-playfab">Troubleshooting PlayFab<a class="hash-link" href="#troubleshooting-playfab" title="Direct link to heading">​</a></h2><p>The less you have the troubleshoot PlayFab the happier you will be. Most of the errors tell you &quot;An Error Occurrred&quot; and nothing else. Here are some potential reasons an error could have occurred.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="your-authentication-expired">Your Authentication Expired<a class="hash-link" href="#your-authentication-expired" title="Direct link to heading">​</a></h3><p>So, for whatever reason sometimes if I keep a PlayFab tab open for a few hours, when I run a query - even a very simple one, it errors. I&#x27;m still logged in, but I guess some internal authentication key needs to be updated. To fix this, just refresh the page and try again. Don&#x27;t trust the editor to save your code though - I almost always write it in VSCode then copy it over because of this.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-code-isnt-selected">The Code Isn&#x27;t Selected<a class="hash-link" href="#the-code-isnt-selected" title="Direct link to heading">​</a></h3><p>You didn&#x27;t select the code you wanted to run. In KQL the entire query needs to be a single block of text (though you can connect things with comments if this is too annoying). It will be slightly highlighted if it&#x27;s selected. Also, the selection detection is not bulletproof, feel free to click the code again and retry. KQL is one of the few languages where just running the code again can fix the problem. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-is-too-big">Query Is Too Big<a class="hash-link" href="#query-is-too-big" title="Direct link to heading">​</a></h3><p>Many users, especially those with established games, will not be able to export all their data at once. Depending on the amount you store + the number of events per session, you can usually get around 500-2000 sessions of data in a single go. This is why the KQL script I provided has a start / end time variable. If your data is too big, I recommend downloading it in chunks. You can import as many CSVs as you want into the upcoming Power Bi step - all you need to do is put them under the same folder, you don&#x27;t even need to name them anything. The python script ahead will deduplicate the data as needed.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="can-i-automate-this">Can I Automate This?<a class="hash-link" href="#can-i-automate-this" title="Direct link to heading">​</a></h2><p>Yes you can. It will require you to create an AAD account in your microsoft workspace, and then using its credentials to perform API calls to retrieve the data. From there you can manually write it into a CSV or bypass the CSV step entirely and modify the upcoming Python script to work with the data you&#x27;ve retrieved. This is a process that took me hours to get right, and whenever I had to set up a new project it would take another hour because I&#x27;d forget. Automation is possible, but I&#x27;m not sure it&#x27;s worth it for most devs.</p><p>Doing it manually takes around 3-5 boring minutes. You don&#x27;t have to worry about rate limits. And you only have to do this once per update. The goal of Midas is not to provide a live feed of how your game is doing, it&#x27;s meant to allow you to do an in-depth study into how an update has influenced the player experiences in your game. I have gone through this process over a dozen times, and frankly all trying to automate it seems to accomplish for me is headaches.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nightcycle/midas/edit/master/docs/Integration/PlayFab.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/midas/docs/Integration/Roblox"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Roblox</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/midas/docs/Integration/PowerBi"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Power BI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-playfab" class="table-of-contents__link toc-highlight">Why PlayFab?</a></li><li><a href="#i-dont-want-to-use-playfab" class="table-of-contents__link toc-highlight">I don&#39;t want to use PlayFab</a></li><li><a href="#retrieving-the-data-via-playfab" class="table-of-contents__link toc-highlight">Retrieving the Data via PlayFab</a></li><li><a href="#troubleshooting-playfab" class="table-of-contents__link toc-highlight">Troubleshooting PlayFab</a><ul><li><a href="#your-authentication-expired" class="table-of-contents__link toc-highlight">Your Authentication Expired</a></li><li><a href="#the-code-isnt-selected" class="table-of-contents__link toc-highlight">The Code Isn&#39;t Selected</a></li><li><a href="#query-is-too-big" class="table-of-contents__link toc-highlight">Query Is Too Big</a></li></ul></li><li><a href="#can-i-automate-this" class="table-of-contents__link toc-highlight">Can I Automate This?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Nightcycle Studios. Built with Moonwave and Docusaurus</div></div></div></footer></div>
<script src="/midas/assets/js/runtime~main.49e3e1c5.js"></script>
<script src="/midas/assets/js/main.9b84b74c.js"></script>
</body>
</html>